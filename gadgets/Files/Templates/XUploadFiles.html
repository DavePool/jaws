<div class="files_interface">
  <template>
    <div>
      <ul>
        <li class="file_details" style="display: none;">
          <input type="hidden"
            name="old_files_{{ input_action }}_{{ input_reference }}_{{ input_type }}[]"
          />
          <ul>
            <li data-type="preview" style="display: none;"></li>
            <li data-type="name"></li>
            <li data-type="size"></li>
            <li data-type="remove">
              <a href="javascript:void(0);"
                onclick="Jaws_Gadget.getInstance('Files').removeFile(this);"
                title="{{ labels.remove }}">
                {{ labels.remove }}
              </a>
            </li>
          </ul>
        </li>
      </ul>

      <input class="form-control-file" type="file"
        data-maxsize="{{ maxsize }}"
        data-dimension="{{ dimension }}"
        data-extensions="{{ extensions }}"
        data-preview="{{ preview }}"
        name="new_files_{{ input_action }}_{{ input_reference }}_{{ input_type }}[]"
        multiple="multiple"
        accept="{{ mimetype | default: '*' }}"
        {{ capture | isset: "capture", "" }}
        onchange="Jaws_Gadget.getInstance('Files').browseFile(this);"
        style="opacity:0; height:0; width:0;"
      />
    </div>
  </template>
  <label>{{ labels.title }}:</label>
  <div>
    <div class="old_files">
      <div>
        <ul>
          {% for file in files %}
          <li class="file_details">
            <input type="hidden"
                name="old_files_{{ input_action }}_{{ input_reference }}_{{ input_type }}[]"
                value="{{ file.id }}"
            />
            <ul>
              {% if preview and file.mimetype contains "image/" %}
              <li data-type="preview">
                <a href="{{ 'Files' | urlmap: 'file', 'id', file.id, 'key', file.filekey }}" target="_blank">
                  <img
                    src="{{ 'files/' | append: interface.gadget, '/', interface.action, '/' | downcase | dataURL: file.filename }}"
                    alt="" width="128"
                  />
                </a>
              </li>
              {% endif %}
              <li data-type="name">
                <a href="{{ 'Files' | urlmap: 'file', 'id', file.id, 'key', file.filekey }}" target="_blank">
                  {{ file.title }}
                </a>
              </li>
              <li data-type="size">{{ file.size }}</li>
              <li data-type="remove">
                <a href="javascript:void(0);"
                  onclick="Jaws_Gadget.getInstance('Files').removeFile(this);"
                  title="{{ labels.remove }}">
                  {{ labels.remove }}
                </a>
              </li>
            </ul>
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>

    <div class="new_files">
    </div>

    <div class="btn_browse">
      <a href="javascript:void(0);"
        data-maxcount="{{ maxcount }}"
        data-initialize="fileuploader"
        onclick="Jaws_Gadget.getInstance('Files').uploadMoreFiles(this);">
        {{ labels.browse }}
      </a>
    </div>
  </div>
</div>
