<!-- BEGIN groups -->
<div class="gadget users groups">
    <h2>{title}</h2>

    <div class="gadget_response">
        <div id="users_contacts_response" class="{type}">{text}</div>
    </div>


    <form name="groups" id="groups" action="{requested_url}" method="post">
        <input type="hidden" name="gadget" value="PrivateMessage"/>
        <input type="hidden" name="action" value="Groups"/>
        <input type="hidden" name="status" value=""/>

        <table>
            <thead>
            <tr>
                <th><input type="checkbox" onclick="toggleCheckboxes();"></th>
                <th>{lbl_name}</th>
                <th>{lbl_title}</th>
                <th>{lbl_enabled}</th>
            </tr>
            </thead>

            <tbody>
            <!-- BEGIN group -->
            <tr>
                <td>
                    <input type="checkbox" name="group_checkbox[]" value="{id}" class="table-checkbox">
                </td>
                <td>{name}</td>
                <td>{title}</td>
                <td>{enabled}</td>
            </tr>
            <!-- END group -->
            </tbody>
        </table>

        <div class="actions">
            <label for="groups_actions_combo">{lbl_actions}:&nbsp;</label>
            <select title="{lbl_actions}" id="groups_actions_combo" name="groups_actions_combo">
                <option value="">{lbl_no_action}</option>
                <option value="delete">{lbl_delete}</option>
                <option value="disable">{lbl_disable}</option>
                <option value="enable">{lbl_enable}</option>
            </select>

            <button value="{lbl_actions}" id="action_button" name="action_button"
                    onclick="javascript: return doDGAction();"><img src="{icon_ok}" alt="{lbl_actions}"/>
            </button>
        </div>

    </form>

</div>

<script type="text/javascript">
    function toggleCheckboxes() {
        do_check = !do_check;
        $$('.table-checkbox').each(function (el) {
            el.checked = do_check;
        });
    }
    var do_check = false;

    function doDGAction() {
        var action = document.getElementById("groups_actions_combo").value;
        if(action == 'delete') {
            document.groups.action.value = 'DeleteGroups';
        } else if(action == 'disable') {
            document.groups.action.value = 'EnableGroups';
            document.groups.status.value = 'no';
        } else if(action == 'enable') {
            document.groups.action.value = 'EnableGroups';
            document.groups.status.value = 'yes';
        }
        document.getElementById("groups").submit();
        return true;
    }
</script>
<!-- END groups -->